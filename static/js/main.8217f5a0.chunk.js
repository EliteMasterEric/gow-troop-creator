(window["webpackJsonpgow-troop-creator"]=window["webpackJsonpgow-troop-creator"]||[]).push([[0],{114:function(e,a,t){},115:function(e,a,t){},116:function(e,a,t){},117:function(e,a,t){"use strict";t.r(a);var r=t(0),l=t.n(r),n=t(10),o=t.n(n),i=t(69),c=t(179),s=t(13),m=t(2),p=t(5),d=t(72),u=t(173),g=t(155),h=t(167),f=t(157),b=t(168),w=t(174),v=t(169),E=t(64),y=t(18),x=t(63),O=t.n(x),j=t(156),R=Object(E.a)(function(e){return{image:{width:"auto",height:"24px",paddingRight:"4px"}}}),k=function(e){var a=e.icon,t=e.className;return l.a.createElement("div",null,l.a.createElement("i",{className:"nf ".concat(a||"nf-fa-amazon"," ").concat(t||"")}))},S=function(e){var a=e.source,t=e.className,r=R();return l.a.createElement("img",{alt:"",src:a,className:t||r.image})},I=Object(E.a)(function(e){return{appbar:{elevation:0,position:"fixed"},toolbar:{paddingLeft:"8px",paddingRight:"8px"},appbarText:{alignSelf:"center",marginRight:"10px"},input:{marginLeft:"auto"},image:{width:"auto",height:"36px",paddingRight:"8px",borderRadius:"24px",overflow:"hidden"}}}),N=function(){var e=I(),a=Object(y.a)(),t=Object(g.a)(a.breakpoints.up("lg"));return l.a.createElement(j.a,{color:"primary",className:e.appbar},l.a.createElement(f.a,{className:e.toolbar},l.a.createElement(S,{source:"./logo256.png",className:e.image}),l.a.createElement(d.a,{className:e.appbarText,variant:"h4",color:"inherit"},t?"Gems of War Troop Creator":"Troop Creator")))},C=t(158),D=t(159),P=t(160),T=t(177),B=t(163),F=Object(E.a)(function(e){return{buttonIcon:{fontSize:"2em"},canvas:{width:"100%",margin:"0px auto",display:"table"}}}),G=function(e){var a=e.troop,t=e.canvasResult,n=F(),o=l.a.useState(""),i=Object(s.a)(o,2),c=i[0],m=i[1],p=function(){m(t.current.toDataURL("image/png"))};return Object(r.useEffect)(p,[t]),Object(r.useEffect)(p,[a]),l.a.createElement(C.a,null,l.a.createElement(D.a,null,l.a.createElement(d.a,{align:"center",variant:"h2"},"Result"),l.a.createElement(P.a,{container:!0},l.a.createElement(P.a,{item:!0,container:!0,justify:"center",xs:12},l.a.createElement(P.a,{item:!0},l.a.createElement(u.a,{className:n.canvas},l.a.createElement("canvas",{ref:t,width:1440,height:757})))),l.a.createElement(P.a,{item:!0,container:!0,justify:"center",xs:12},l.a.createElement(P.a,{item:!0},l.a.createElement(T.a,{title:"Download","aria-label":"download"},l.a.createElement(B.a,{variant:"outlined",size:"large",href:c,download:"".concat(a.troop.name,".png")},l.a.createElement(k,{className:n.buttonIcon,icon:"nf-mdi-download"}))))))))},A=t(172),Y=t(165),L=t(166),z=t(175),U=t(47);function M(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,r)}return t}function V(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?M(t,!0).forEach(function(a){Object(p.a)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(t).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}var W=Object(E.a)(function(e){var a;return{appbar:{elevation:0,position:"fixed"},toolbar:{paddingLeft:"8px",paddingRight:"8px"},appbarText:{alignSelf:"center",marginRight:"10px"},input:{marginLeft:"auto"},menu:{width:200},menuColor:{width:400},spellPower:(a={},Object(p.a)(a,e.breakpoints.up("xs"),{width:"100%"}),Object(p.a)(a,e.breakpoints.up(1400),{width:"50%",padding:"4px"}),a),dropzone:{backgroundColor:"#1f1f1f"},formElement:{margin:"12px 0"}}}),_=function(e){var a,t=e.spellData,r=e.setSpellData,n=Object(m.a)(e,["spellData","setSpellData"]),o=W(),i=(Object(y.a)(),function(e){return function(a){r(V({},t,Object(p.a)({},e,a.target.value)))}});return l.a.createElement(P.a,Object.assign({xs:12,lg:8,container:!0,item:!0,direction:"row"},n),l.a.createElement(P.a,{item:!0,className:o.formElement,xs:12,sm:12,md:6,lg:4,xl:4},l.a.createElement(C.a,{className:o.card},l.a.createElement(D.a,null,l.a.createElement(d.a,{variant:"h4"},"Spell Name"),l.a.createElement(A.a,{id:"form-spellname",value:t.spellname,onChange:i("spellname"),margin:"normal",type:"text",label:"Spell Name",style:{width:"100%"},variant:"outlined"})))),l.a.createElement(P.a,{item:!0,className:o.formElement,xs:12,sm:12,md:6,lg:4,xl:4},l.a.createElement(C.a,{className:o.card},l.a.createElement(D.a,null,l.a.createElement(d.a,{variant:"h4"},"Spell Description"),l.a.createElement(A.a,{id:"form-spelldesc",value:t.spelldesc,onChange:i("spelldesc"),margin:"normal",type:"text",multiline:!0,helperText:"{magic} specifies spell power",label:"Spell Description",style:{width:"100%"},variant:"outlined"})))),l.a.createElement(P.a,{item:!0,className:o.formElement,xs:12,sm:12,md:6,lg:4,xl:4},l.a.createElement(C.a,{className:o.card},l.a.createElement(D.a,null,l.a.createElement(d.a,{variant:"h4"},"Magic"),l.a.createElement(A.a,{id:"form-magic",value:t.magic,type:"number",label:"Magic",onChange:i("magic"),margin:"normal",style:{width:"100%"},InputProps:{startAdornment:l.a.createElement(Y.a,{position:"start"},l.a.createElement(S,{source:"./assets/graphics/troopcard/magic.png"}))},variant:"outlined"})))),l.a.createElement(P.a,{item:!0,className:o.formElement,xs:12,sm:12,md:6,lg:4,xl:4},l.a.createElement(C.a,{className:o.card},l.a.createElement(D.a,null,l.a.createElement(d.a,{variant:"h4"},"Spell Power"),l.a.createElement(A.a,{id:"form-spellmult",value:t.spellmult,type:"number",label:"Multiplier",onChange:i("spellmult"),margin:"normal",className:o.spellPower,variant:"outlined"}),l.a.createElement(A.a,{id:"form-spellbase",value:t.spellbase,type:"number",label:"Base",onChange:i("spellbase"),margin:"normal",className:o.spellPower,variant:"outlined"}),l.a.createElement(L.a,{control:l.a.createElement(z.a,{checked:t.spellrange,onChange:(a="spellrange",function(e){r(V({},t,Object(p.a)({},a,e.target.checked)))}),value:"spellrange"}),label:"Range?"})))),l.a.createElement(P.a,{item:!0,className:o.formElement,xs:12},l.a.createElement(C.a,{className:o.card},l.a.createElement(D.a,null,l.a.createElement(d.a,{variant:"h4"},"Image"),l.a.createElement(d.a,{variant:"subtitle2",gutterBottom:!0},"Preferred Size: 460x340"),l.a.createElement(U.a,{dropzoneClass:o.dropzone,acceptedFiles:["image/*"],filesLimit:1,showAlerts:!0,onChange:function(e){0===e.length?r(V({},t,{spellimage:null})):r(V({},t,{spellimage:e[0]}))}})))))},J=t(33),K=t.n(J),q=Object(E.a)(function(e){return{cardBox:{padding:e.spacing(3)+"px 0"},card:{width:"100%",margin:"0px auto",display:"table"}}}),H=["./assets/graphics/troopcard/top.png","./assets/graphics/troopcard/bottom.png","./assets/graphics/troopcard/divider.png","./assets/graphics/troopcard/spellbg.png","./assets/graphics/troopcard/magic.png"],X={Common:{color:"#FEFEFE",pips:1},Rare:{color:"#54A721",pips:2},"Ultra-Rare":{color:"#1D71FF",pips:3},Epic:{color:"#9635E7",pips:4},Legendary:{color:"#F3A120",pips:5},Mythic:{color:"#13E3F6",pips:6},Doomed:{color:"#B90000",pips:6}};var Q=function(e,a,t,r){var l=e.fillStyle,n=e.font;e.save(),a.forEach(function(a){var o=a.text,i=a.fillStyle,c=a.font;e.fillStyle=i||l,e.font=c||n,e.fillText(o,t,r),t+=e.measureText(o).width}),e.restore()},Z=function(e,a,t,r,l,n,o,i){for(var c=n;c>0;){var s=i.split(" "),m=[],p=[0],d=s[0],u=-1;e.font='600 {}px "Open Sans"'.replace("{}",c);for(var g=1;g<s.length;g++){var h=s[g];if("{magic}"===h){u=g;var f=parseInt(o.spell.spellbase)+parseInt(o.spell.spellmult)*parseInt(o.spell.magic);h=o.spell.spellrange?Math.floor(f/2)+" - "+f:f}e.measureText(d+" "+h).width<r?d+=" "+h:(m.push(d),p.push(g),d=h)}if(m.push(d),p.push(g),!(m.length*c>l)){for(var b=t-m.length*c/2,w=0;w<m.length;w++)if(-1!==u&&u<=p[w+1]&&p[w]<u){e.textAlign="left";var v=a-e.measureText(m[w]).width/2;e.fillStyle="#680b7c";var E=u-p[w],y=m[w].split(" ").splice(E,o.spell.spellrange?3:1),x=m[w].split(y.join(" "))[0],O=m[w].split(y.join(" "))[1],j=[],R='bold {}px "Open Sans"'.replace("{}",c);j=o.spell.spellrange?[{text:x,fillStyle:"#000000"},{text:y[0]+" ",fillStyle:"#680b7c",font:R},{text:y[1],fillStyle:"#000000"},{text:" "+y[2],fillStyle:"#680b7c",font:R},{text:O,fillStyle:"#000000"}]:[{text:x,fillStyle:"#000000"},{text:y[0],fillStyle:"#680b7c",font:R},{text:O,fillStyle:"#000000"}],Q(e,j,v,b+c*w)}else e.textAlign="center",e.fillStyle="#000000",e.fillText(m[w],a,b+c*w);break}c-=2}};function $(e,a,t,r,l,n){e.width=460,e.height=727;var o=e.getContext("2d");a.width=e.width,a.height=e.height;var i=a.getContext("2d"),c=X[t.troop.rarity].color;i.save(),i.drawImage(r[0],0,0,460,16),i.drawImage(r[1],0,689,460,34),i.drawImage(r[2],0,427,460,14),i.fillStyle=c,i.globalCompositeOperation="source-in",i.fillRect(0,0,a.width,a.height),o.drawImage(a,0,0,e.width,e.height),i.clearRect(0,0,a.width,a.height),i.restore(),o.fillStyle="#000",o.fillRect(0,16,460,71),o.font='600 50px "Open Sans"',o.fillStyle="#FFF",o.textAlign="center",o.fillText(t.spell.spellname,215,66),o.drawImage(r[5],0,87,460,340),o.drawImage(r[3],0,441,460,248),o.drawImage(r[4],185,454,34,42),o.font='600 40px "Open Sans"',o.fillStyle="#FFF",o.textAlign="left",o.fillText(t.spell.magic,235,488),Z(o,230,623,430,150,36,t,t.spell.spelldesc);var s=n.getContext("2d");s.clearRect(5,15,e.width,e.height),s.drawImage(e,5,15,e.width,e.height),l(e.toDataURL("image/png"))}var ee=function(e){return null!==e.spell.spellimage?URL.createObjectURL(e.spell.spellimage):"./assets/graphics/troopcard/eruption.png"},ae=function(e){var a=e.troop,t=e.canvasResult,n=e.setDownloadUrl,o=q(),i=l.a.useRef(null),c=l.a.useRef(null),m=l.a.useState(!1),p=Object(s.a)(m,2),d=p[0],g=p[1];return Object(r.useEffect)(function(){K.a.load({google:{families:["Open Sans:400,600,700","Roboto","Raleway"]},fontactive:function(){g(!0)}})},[]),Object(r.useEffect)(function(){var e;d?function(e,a,t,r,l,n,o){var i={},c=0,s=H.length+r.length;for(var m in H)i[m]=new Image,i[m].onload=function(){++c>=s&&l(e,a,t,i,n,o)},i[m].src=H[m];for(m in r){var p=parseInt(m)+H.length;i[p]=new Image,i[p].onload=function(){++c>=s&&l(e,a,t,i,n,o)},i[p].src=r[m]}}(i.current,c.current,a,[ee(a)],$,n,t.current):((e=i.current).width=491,e.height=727)},[a,d]),l.a.createElement(u.a,{height:1,className:o.cardBox},l.a.createElement("canvas",{ref:i,className:o.card}),l.a.createElement("canvas",{ref:c,style:{display:"none"}}))},te=Object(E.a)(function(e){return{buttonGrid:{paddingTop:"6px"},buttonIcon:{fontSize:"2em"},card:{padding:e.spacing(3)}}}),re=function(e){var a=e.troop,t=e.canvasResult,r=Object(m.a)(e,["troop","canvasResult"]),n=te(),o=l.a.useState(""),i=Object(s.a)(o,2),c=i[0],p=i[1];return l.a.createElement(P.a,Object.assign({item:!0,xs:12,lg:4},r),l.a.createElement(C.a,{className:n.card},l.a.createElement(D.a,null,l.a.createElement(d.a,{align:"center",variant:"h2"},"Preview"),l.a.createElement(ae,{troop:a,canvasResult:t,setDownloadUrl:p}),l.a.createElement(P.a,{container:!0,justify:"center",className:n.buttonGrid,spacing:3},l.a.createElement(P.a,{item:!0},l.a.createElement(T.a,{title:"Download","aria-label":"download"},l.a.createElement(B.a,{variant:"outlined",size:"large",href:c,download:"".concat(a.troop.name,".png")},l.a.createElement(k,{className:n.buttonIcon,icon:"nf-mdi-download"}))))))))},le=Object(E.a)(function(e){var a,t;return{cardGridItem:(a={},Object(p.a)(a,e.breakpoints.up("xs"),{order:1}),Object(p.a)(a,e.breakpoints.up("lg"),{order:2}),Object(p.a)(a,"order",2),Object(p.a)(a,"width","calc(75vh)"),a),formGridItem:(t={},Object(p.a)(t,e.breakpoints.up("xs"),{order:2}),Object(p.a)(t,e.breakpoints.up("lg"),{order:1}),t)}}),ne=function(e){var a=e.spellData,t=e.debouncedTroop,r=e.setSpellData,n=e.canvasResult,o=Object(m.a)(e,["spellData","debouncedTroop","setSpellData","canvasResult"]),i=le();return l.a.createElement(P.a,Object.assign({container:!0,direction:"row"},o),l.a.createElement(_,{spellData:a,className:i.formGridItem,setSpellData:r}),l.a.createElement(re,{troop:t,canvasResult:n,className:i.cardGridItem}))},oe=t(178),ie=[{value:"Blue",label:"Blue"},{value:"Green",label:"Green"},{value:"Red",label:"Red"},{value:"Yellow",label:"Yellow"},{value:"Purple",label:"Purple"},{value:"Orange",label:"Brown"},{value:"BlueGreen",label:"Blue / Green"},{value:"BlueRed",label:"Blue / Red"},{value:"BlueYellow",label:"Blue / Yellow"},{value:"BluePurple",label:"Blue / Purple"},{value:"BlueOrange",label:"Blue / Brown"},{value:"GreenRed",label:"Green / Red"},{value:"GreenYellow",label:"Green / Yellow"},{value:"GreenPurple",label:"Green / Purple"},{value:"GreenOrange",label:"Green / Brown"},{value:"RedYellow",label:"Red / Yellow"},{value:"RedPurple",label:"Red / Purple"},{value:"RedOrange",label:"Red / Brown"},{value:"YellowPurple",label:"Yellow / Purple"},{value:"YellowOrange",label:"Yellow / Brown"},{value:"PurpleOrange",label:"Purple / Brown"},{value:"BlueGreenRed",label:"Blue / Green / Red"},{value:"BlueGreenYellow",label:"Blue / Green / Yellow"},{value:"BlueGreenPurple",label:"Blue / Green / Purple"},{value:"BlueGreenOrange",label:"Blue / Green / Brown"},{value:"BlueRedYellow",label:"Blue / Red / Yellow"},{value:"BlueRedPurple",label:"Blue / Red / Purple"},{value:"BlueRedOrange",label:"Blue / Red / Brown"},{value:"BlueYellowPurple",label:"Blue / Yellow / Purple"},{value:"BlueYellowOrange",label:"Blue / Yellow / Brown"},{value:"BluePurpleOrange",label:"Blue / Purple / Brown"},{value:"GreenRedYellow",label:"Green / Red / Yellow"},{value:"GreenRedPurple",label:"Green / Red / Purple"},{value:"GreenRedOrange",label:"Green / Red / Brown"},{value:"GreenYellowPurple",label:"Green / Yellow / Purple"},{value:"GreenYellowOrange",label:"Green / Yellow / Brown"},{value:"GreenPurpleOrange",label:"Green / Purple / Brown"},{value:"RedYellowPurple",label:"Red / Yellow / Purple"},{value:"RedYellowOrange",label:"Red / Yellow / Brown"},{value:"RedPurpleOrange",label:"Red / Purple / Brown"},{value:"YellowPurpleOrange",label:"Yellow / Purple / Brown"},{value:"All",label:"All"}],ce=["Common","Rare","Ultra-Rare","Epic","Legendary","Mythic","Doomed"],se=["Assassin","Defender","Generator","Mage","Striker","Support","Warlock","Warmaster","Warrior"],me=["aflame","agile","airbrand","airheart","airlink","airspirit","alert","arcane","armored","armorpiercing","aspectofdeath","aspectoffamine","aspectofplague","aspectofwar","assassinate","avenger","beastbond","beastslayer","big","blessed","bloodsucking","bullseye","centaurbond","centaurslayer","chill","chilltouch","clobber","clockwork","cocoon","compassion","constructbond","constructslayer","cunning","cursed","daemonbond","daemonicpact","daemonslayer","darkchannel","darkfall","deathtouch","defender","divineaura","divinebond","divineshield","divineslayer","doom","dragonbond","dragonslayer","dragonvines","dwarfbond","dwarfslayer","elementalbond","elementalslayer","elfbond","elfslayer","empowered","ensoul","eyeofkhetar","fall","fast","feybond","feyslayer","fierycloak","firebrand","fireheart","firelink","fireproof","firespirit","flying","frenzy","frozensoul","fullplate","gardswrath","gateguardian","giantbond","giantslayer","goblinbond","goblinslayer","goblord","graniteskin","greedy","grudge","hacknslash","huge","humanbond","humanslayer","hunger","icycloak","immense","immortal","immune","impervious","indigestible","inscribed","insulated","jinx","kingswill","knightbond","knightslayer","knockout","leader","lethaltoxin","lifedrain","lionstrength","magicbrand","magicheart","magiclink","magicspirit","manashield","manyheads","marauderbond","marauderslayer","mechbond","mechslayer","merchant","merfolkbond","merfolkslayer","miasma","molten","monsterbond","monsterslayer","mysticbond","mysticslayer","nagabond","nagaslayer","nastyteeth","naturebrand","natureheart","naturelink","naturespirit","necromancy","orcbond","orclord","orcslayer","plaguetouch","pyromania","queensgrace","rakshabond","rakshaslayer","regeneration","reinforced","roguebond","rogueslayer","sacrifice","seedling","shatter","siege","silence","siphon","slippery","snare","soullegion","spikearmor","spiritfire","stalker","stealthy","stonebrand","stoneheart","stonelink","stoneskin","stonespirit","stryxbond","stryxslayer","sturdy","sunshine","suppression","taurosbond","taurosslayer","technomancy","thickhead","thorns","trueshot","undeadbond","undeadslayer","venomous","virulence","ward","warded","wargarebond","wargareslayer","waterbrand","waterheart","waterlink","waterspirit","wildfolkbond","wildfolkslayer","winterveil"];function pe(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,r)}return t}var de=Object(E.a)(function(e){var a,t,r,l,n,o;return{appbar:{elevation:0,position:"fixed"},toolbar:{paddingLeft:"8px",paddingRight:"8px"},appbarText:{alignSelf:"center",marginRight:"10px"},input:{marginLeft:"auto"},menu:{width:200},menuColor:{width:400},skill:(a={},Object(p.a)(a,e.breakpoints.up("xs"),{width:"100%"}),Object(p.a)(a,e.breakpoints.up(1200),{width:"33%",padding:"4px"}),a),manaCost:(t={},Object(p.a)(t,e.breakpoints.up("xs"),{width:"100%"}),Object(p.a)(t,e.breakpoints.up(1400),{width:"33%",padding:"4px"}),t),manaColors:(r={},Object(p.a)(r,e.breakpoints.up("xs"),{width:"100%"}),Object(p.a)(r,e.breakpoints.up(1400),{width:"66%",padding:"4px"}),r),typeField:(l={},Object(p.a)(l,e.breakpoints.up("xs"),{width:"100%"}),Object(p.a)(l,e.breakpoints.up(1400),{width:"50%",padding:"4px"}),l),traitcode:(n={},Object(p.a)(n,e.breakpoints.up("xs"),{width:"100%"}),Object(p.a)(n,e.breakpoints.up("md"),{width:"80px",padding:"4px"}),n),traitname:(o={},Object(p.a)(o,e.breakpoints.up("xs"),{width:"100%"}),Object(p.a)(o,e.breakpoints.up("md"),{width:"calc(100% - 80px)",padding:"4px"}),o),formElement:{margin:"12px 0"}}}),ue=function(e){var a=e.traitData,t=e.setTraitData,r=Object(m.a)(e,["traitData","setTraitData"]),n=de(),o=function(e){return function(r){t(function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?pe(t,!0).forEach(function(a){Object(p.a)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pe(t).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}({},a,Object(p.a)({},e,r.target.value)))}};return l.a.createElement(P.a,Object.assign({xs:12,lg:8,container:!0,item:!0,direction:"row"},r),l.a.createElement(P.a,{item:!0,className:n.formElement,xs:12,sm:12,md:6,lg:4,xl:4},l.a.createElement(C.a,{className:n.card},l.a.createElement(D.a,null,l.a.createElement(d.a,{variant:"h4"},"Trait 1"),l.a.createElement(A.a,{id:"form-trait1code",value:a.trait1code,select:!0,label:"Trait Icon",onChange:o("trait1code"),margin:"normal",className:n.traitcode,variant:"outlined"},me.map(function(e){return l.a.createElement(oe.a,{key:e,value:e},l.a.createElement(S,{source:"./assets/graphics/troopcard/traits/".concat(e,".png")}))})),l.a.createElement(A.a,{id:"form-trait1name",value:a.trait1name,onChange:o("trait1name"),margin:"normal",type:"text",label:"Trait Name",className:n.traitname,variant:"outlined"}),l.a.createElement(A.a,{id:"form-trait1desc",value:a.trait1desc,onChange:o("trait1desc"),margin:"normal",type:"text",multiline:!0,label:"Trait Description",style:{width:"100%"},variant:"outlined"})))),l.a.createElement(P.a,{item:!0,className:n.formElement,xs:12,sm:12,md:6,lg:4,xl:4},l.a.createElement(C.a,null,l.a.createElement(D.a,null,l.a.createElement(d.a,{variant:"h4"},"Trait 2"),l.a.createElement(A.a,{id:"form-trait2code",value:a.trait2code,select:!0,label:"Trait Icon",onChange:o("trait2code"),margin:"normal",className:n.traitcode,variant:"outlined"},me.map(function(e){return l.a.createElement(oe.a,{key:e,value:e},l.a.createElement(S,{source:"./assets/graphics/troopcard/traits/".concat(e,".png")}))})),l.a.createElement(A.a,{id:"form-trait2name",value:a.trait2name,onChange:o("trait2name"),margin:"normal",type:"text",label:"Trait Name",className:n.traitname,variant:"outlined"}),l.a.createElement(A.a,{id:"form-trait2desc",value:a.trait2desc,onChange:o("trait2desc"),margin:"normal",type:"text",multiline:!0,label:"Trait Description",style:{width:"100%"},variant:"outlined"})))),l.a.createElement(P.a,{item:!0,className:n.formElement,xs:12,sm:12,md:6,lg:4,xl:4},l.a.createElement(C.a,null,l.a.createElement(D.a,null,l.a.createElement(d.a,{variant:"h4"},"Trait 3"),l.a.createElement(A.a,{id:"form-trait3code",value:a.trait3code,select:!0,label:"Trait Icon",onChange:o("trait3code"),margin:"normal",className:n.traitcode,variant:"outlined"},me.map(function(e){return l.a.createElement(oe.a,{key:e,value:e},l.a.createElement(S,{source:"./assets/graphics/troopcard/traits/".concat(e,".png")}))})),l.a.createElement(A.a,{id:"form-trait3name",value:a.trait3name,onChange:o("trait3name"),margin:"normal",type:"text",label:"Trait Name",className:n.traitname,variant:"outlined"}),l.a.createElement(A.a,{id:"form-trait3desc",value:a.trait3desc,onChange:o("trait3desc"),margin:"normal",type:"text",multiline:!0,label:"Trait Description",style:{width:"100%"},variant:"outlined"})))))},ge=Object(E.a)(function(e){return{cardBox:{padding:e.spacing(3)+"px 0"},card:{width:"100%",margin:"0px auto",display:"table"}}}),he=["./assets/graphics/troopcard/top.png","./assets/graphics/troopcard/bottom.png","./assets/graphics/troopcard/divider.png","./assets/graphics/troopcard/ascension.png","./assets/graphics/troopcard/traitbg.png"],fe={Common:{color:"#FEFEFE",pips:1},Rare:{color:"#54A721",pips:2},"Ultra-Rare":{color:"#1D71FF",pips:3},Epic:{color:"#9635E7",pips:4},Legendary:{color:"#F3A120",pips:5},Mythic:{color:"#13E3F6",pips:6},Doomed:{color:"#B90000",pips:6}};function be(e,a,t,r,l,n){for(var o=n.split(" "),i=[],c=o[0],s=1;s<o.length;s++){var m=o[s];e.measureText(c+" "+m).width<r?c+=" "+m:(i.push(c),c=m)}i.push(c);for(var p=t-i.length*l/2,d=0;d<i.length;d++)e.fillText(i[d],a,p+l*d)}function we(e,a,t,r,l,n){e.width=460,e.height=727;var o=e.getContext("2d");a.width=e.width,a.height=e.height;var i=a.getContext("2d"),c=fe[t.troop.rarity].color;i.save(),i.drawImage(r[0],0,0,460,16),i.drawImage(r[1],0,693,460,34),i.drawImage(r[2],0,281,460,14),i.drawImage(r[2],0,487,460,14),i.fillStyle=c,i.globalCompositeOperation="source-in",i.fillRect(0,0,a.width,a.height),o.drawImage(a,0,0,e.width,e.height),i.clearRect(0,0,a.width,a.height),i.restore(),o.fillStyle="#000",o.fillRect(0,16,460,73),o.font='600 50px "Open Sans"',o.fillStyle="#FFF",o.textAlign="center",o.fillText("Traits",215,66),o.drawImage(r[4],0,89,460,192),o.drawImage(r[4],0,295,460,192),o.drawImage(r[4],0,501,460,192),i.save(),i.drawImage(r[3],12,104,36,36),i.drawImage(r[5],404,104,36,36),i.globalCompositeOperation="source-in",i.fillStyle=fe.Epic.color,i.fillRect(0,0,a.width,a.height),o.globalAlpha=1,o.drawImage(a,0,0,a.width,a.height),i.clearRect(0,0,a.width,a.height),i.restore(),i.save(),i.drawImage(r[3],12,310,36,36),i.drawImage(r[6],404,310,36,36),i.globalCompositeOperation="source-in",i.fillStyle=fe.Legendary.color,i.fillRect(0,0,a.width,a.height),o.drawImage(a,0,0,a.width,a.height),i.clearRect(0,0,a.width,a.height),i.restore(),i.save(),i.drawImage(r[3],12,516,36,36),i.drawImage(r[7],404,516,36,36),i.globalCompositeOperation="source-in",i.fillStyle=fe.Mythic.color,i.fillRect(0,0,a.width,a.height),o.drawImage(a,0,0,a.width,a.height),i.clearRect(0,0,a.width,a.height),i.restore(),o.font='600 32px "Open Sans"',o.textAlign="left",o.fillStyle=fe.Epic.color,o.fillText(t.trait.trait1name,60,134),o.fillStyle=fe.Legendary.color,o.fillText(t.trait.trait2name,60,340),o.fillStyle=fe.Mythic.color,o.fillText(t.trait.trait3name,60,546),o.font='600 32px "Open Sans"',o.fillStyle="#000",o.textAlign="center",be(o,230,246,400,32,t.trait.trait1desc),be(o,230,452,400,32,t.trait.trait2desc),be(o,230,658,400,32,t.trait.trait3desc);var s=n.getContext("2d");s.clearRect(975,10,e.width,e.height),s.drawImage(e,975,10,e.width,e.height),l(e.toDataURL("image/png"))}var ve=function(e){var a=e.troop,t=e.canvasResult,n=e.setDownloadUrl,o=ge(),i=l.a.useRef(null),c=l.a.useRef(null),m=l.a.useState(!1),p=Object(s.a)(m,2),d=p[0],g=p[1];return Object(r.useEffect)(function(){K.a.load({google:{families:["Open Sans:400,600,700","Roboto","Raleway"]},fontactive:function(){g(!0)}})},[]),Object(r.useEffect)(function(){var e;d?function(e,a,t,r,l,n,o){var i={},c=0,s=he.length+r.length;for(var m in he)i[m]=new Image,i[m].onload=function(){++c>=s&&l(e,a,t,i,n,o)},i[m].src=he[m];for(m in r){var p=parseInt(m)+he.length;i[p]=new Image,i[p].onload=function(){++c>=s&&l(e,a,t,i,n,o)},i[p].src=r[m]}}(i.current,c.current,a,["./assets/graphics/troopcard/traits/".concat(a.trait.trait1code,".png"),"./assets/graphics/troopcard/traits/".concat(a.trait.trait2code,".png"),"./assets/graphics/troopcard/traits/".concat(a.trait.trait3code,".png")],we,n,t.current):((e=i.current).width=460,e.height=727)},[a,d]),l.a.createElement(u.a,{height:1,className:o.cardBox},l.a.createElement("canvas",{ref:i,className:o.card}),l.a.createElement("canvas",{ref:c,style:{display:"none"}}))},Ee=Object(E.a)(function(e){return{buttonGrid:{paddingTop:"6px"},buttonIcon:{fontSize:"2em"},card:{padding:e.spacing(3)}}}),ye=function(e){var a=e.troop,t=e.canvasResult,r=Object(m.a)(e,["troop","canvasResult"]),n=Ee(),o=l.a.useState(""),i=Object(s.a)(o,2),c=i[0],p=i[1];return l.a.createElement(P.a,Object.assign({item:!0,xs:12,lg:4},r),l.a.createElement(C.a,{className:n.card},l.a.createElement(D.a,null,l.a.createElement(d.a,{align:"center",variant:"h2"},"Preview"),l.a.createElement(ve,{troop:a,canvasResult:t,setDownloadUrl:p}),l.a.createElement(P.a,{container:!0,justify:"center",className:n.buttonGrid,spacing:3},l.a.createElement(P.a,{item:!0},l.a.createElement(T.a,{title:"Download","aria-label":"download"},l.a.createElement(B.a,{variant:"outlined",size:"large",href:c,download:"".concat(a.troop.name,".png")},l.a.createElement(k,{className:n.buttonIcon,icon:"nf-mdi-download"}))))))))},xe=Object(E.a)(function(e){var a,t;return{cardGridItem:(a={},Object(p.a)(a,e.breakpoints.up("xs"),{order:1}),Object(p.a)(a,e.breakpoints.up("lg"),{order:2}),Object(p.a)(a,"order",2),Object(p.a)(a,"width","calc(75vh)"),a),formGridItem:(t={},Object(p.a)(t,e.breakpoints.up("xs"),{order:2}),Object(p.a)(t,e.breakpoints.up("lg"),{order:1}),t)}}),Oe=function(e){var a=e.traitData,t=e.debouncedTroop,r=e.setTraitData,n=e.canvasResult,o=Object(m.a)(e,["traitData","debouncedTroop","setTraitData","canvasResult"]),i=xe();return l.a.createElement(P.a,Object.assign({container:!0,direction:"row"},o),l.a.createElement(ue,{traitData:a,className:i.formGridItem,setTraitData:r}),l.a.createElement(ye,{troop:t,canvasResult:n,className:i.cardGridItem}))};function je(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,r)}return t}function Re(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?je(t,!0).forEach(function(a){Object(p.a)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):je(t).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}var ke=Object(E.a)(function(e){var a,t,r,l,n;return{appbar:{elevation:0,position:"fixed"},toolbar:{paddingLeft:"8px",paddingRight:"8px"},appbarText:{alignSelf:"center",marginRight:"10px"},input:{marginLeft:"auto"},menu:{width:200},menuColor:{width:400},skill:(a={},Object(p.a)(a,e.breakpoints.up("xs"),{width:"100%"}),Object(p.a)(a,e.breakpoints.up(1200),{width:"33%",padding:"4px"}),a),manaCost:(t={},Object(p.a)(t,e.breakpoints.up("xs"),{width:"100%"}),Object(p.a)(t,e.breakpoints.up(1400),{width:"33%",padding:"4px"}),t),manaColors:(r={},Object(p.a)(r,e.breakpoints.up("xs"),{width:"100%"}),Object(p.a)(r,e.breakpoints.up(1400),{width:"66%",padding:"4px"}),r),typeField:(l={},Object(p.a)(l,e.breakpoints.up("xs"),{width:"100%"}),Object(p.a)(l,e.breakpoints.up(1400),{width:"50%",padding:"4px"}),l),trait:(n={},Object(p.a)(n,e.breakpoints.up("xs"),{width:"100%"}),Object(p.a)(n,e.breakpoints.up("xl"),{width:"33%",padding:"4px"}),n),dropzone:{backgroundColor:"#1f1f1f"},formElement:{margin:"12px 0"}}}),Se=function(e){var a=e.troopData,t=e.setTroopData,r=Object(m.a)(e,["troopData","setTroopData"]),n=ke(),o=Object(y.a)(),i=Object(g.a)(o.breakpoints.up("lg")),c=function(e){return function(r){t(Re({},a,Object(p.a)({},e,r.target.value)))}};return l.a.createElement(P.a,Object.assign({xs:12,lg:8,spacing:i?3:0,container:!0,item:!0,direction:"row"},r),l.a.createElement(P.a,{item:!0,className:n.formElement,xs:12,sm:12,md:6,lg:4,xl:3},l.a.createElement(C.a,{className:n.card},l.a.createElement(D.a,null,l.a.createElement(d.a,{variant:"h4"},"Name"),l.a.createElement(A.a,{id:"form-name",value:a.name,onChange:c("name"),margin:"normal",type:"text",label:"Name",style:{width:"100%"},variant:"outlined"})))),l.a.createElement(P.a,{item:!0,className:n.formElement,xs:12,sm:12,md:6,lg:4,xl:3},l.a.createElement(C.a,{className:n.card},l.a.createElement(D.a,null,l.a.createElement(d.a,{variant:"h4"},"Kingdom"),l.a.createElement(A.a,{id:"form-kingdom",value:a.kingdom,onChange:c("kingdom"),margin:"normal",type:"text",label:"Kingdom",style:{width:"100%"},variant:"outlined"})))),l.a.createElement(P.a,{item:!0,className:n.formElement,xs:12,sm:12,md:6,lg:4,xl:3},l.a.createElement(C.a,{className:n.card},l.a.createElement(D.a,null,l.a.createElement(d.a,{variant:"h4"},"Rarity"),l.a.createElement(A.a,{id:"form-rarity",value:a.rarity,select:!0,label:"Rarity",onChange:c("rarity"),margin:"normal",style:{width:"100%"},variant:"outlined"},ce.map(function(e){return l.a.createElement(oe.a,{key:e,value:e},e)}))))),l.a.createElement(P.a,{item:!0,className:n.formElement,xs:12,sm:12,md:6,lg:3,xl:3},l.a.createElement(C.a,{className:n.card},l.a.createElement(D.a,null,l.a.createElement(d.a,{variant:"h4"},"Level"),l.a.createElement(A.a,{id:"form-level",value:a.level,type:"number",onChange:c("level"),margin:"normal",label:"Level",style:{width:"100%"},variant:"outlined"})))),l.a.createElement(P.a,{item:!0,className:n.formElement,xs:12,sm:12,md:6,lg:3,xl:3},l.a.createElement(C.a,{className:n.card},l.a.createElement(D.a,null,l.a.createElement(d.a,{variant:"h4"},"Role"),l.a.createElement(A.a,{id:"form-role",value:a.role,select:!0,label:"Role",onChange:c("role"),margin:"normal",style:{width:"100%"},variant:"outlined"},se.map(function(e){return l.a.createElement(oe.a,{key:e,value:e},l.a.createElement(S,{source:"./assets/graphics/troopcard/roles/".concat(e,".png")})," ",e)}))))),l.a.createElement(P.a,{item:!0,className:n.formElement,xs:12,sm:12,md:6,lg:6,xl:5},l.a.createElement(C.a,{className:n.card},l.a.createElement(D.a,null,l.a.createElement(d.a,{variant:"h4"},"Mana Cost"),l.a.createElement(A.a,{id:"form-cost",value:a.cost,type:"number",label:"Cost",onChange:c("cost"),margin:"normal",className:n.manaCost,variant:"outlined"}),l.a.createElement(A.a,{id:"form-colors",value:a.colors,select:!0,label:"Colors",onChange:c("colors"),SelectProps:{MenuProps:{className:n.menuColor}},margin:"normal",className:n.manaColors,variant:"outlined"},ie.map(function(e){return l.a.createElement(oe.a,{key:e.value,value:e.value},l.a.createElement(S,{source:"./assets/graphics/troopcard/colors/".concat(e.value,".png")})," ",e.label)}))))),l.a.createElement(P.a,{item:!0,className:n.formElement,xs:12,sm:12,md:6,lg:4},l.a.createElement(C.a,{className:n.card},l.a.createElement(D.a,null,l.a.createElement(d.a,{variant:"h4"},"Types"),l.a.createElement(A.a,{id:"form-type1",value:a.type1,onChange:c("type1"),margin:"normal",type:"text",label:"Type 1",className:n.typeField,variant:"outlined"}),l.a.createElement(A.a,{id:"form-type2",value:a.type2,onChange:c("type2"),margin:"normal",type:"text",label:"Type 2 (Optional)",className:n.typeField,variant:"outlined"})))),l.a.createElement(P.a,{item:!0,className:n.formElement,xs:12,sm:12,md:6,lg:5,xl:5},l.a.createElement(C.a,{className:n.card},l.a.createElement(D.a,null,l.a.createElement(d.a,{variant:"h4"},"Skills"),l.a.createElement(A.a,{id:"form-attack",value:a.attack,type:"number",label:"Attack",onChange:c("attack"),margin:"normal",className:n.skill,InputProps:{startAdornment:l.a.createElement(Y.a,{position:"start"},l.a.createElement(S,{source:"./assets/graphics/troopcard/attack.png"}))},variant:"outlined"}),l.a.createElement(A.a,{id:"form-armor",value:a.armor,type:"number",label:"Armor",onChange:c("armor"),margin:"normal",className:n.skill,InputProps:{startAdornment:l.a.createElement(Y.a,{position:"start"},l.a.createElement(S,{source:"./assets/graphics/troopcard/armor.png"}))},variant:"outlined"}),l.a.createElement(A.a,{id:"form-life",value:a.life,type:"number",label:"Life",onChange:c("life"),margin:"normal",className:n.skill,InputProps:{startAdornment:l.a.createElement(Y.a,{position:"start"},l.a.createElement(S,{source:"./assets/graphics/troopcard/life.png"}))},variant:"outlined"})))),l.a.createElement(P.a,{item:!0,className:n.formElement,xs:12},l.a.createElement(C.a,{className:n.card},l.a.createElement(D.a,null,l.a.createElement(d.a,{variant:"h4"},"Image"),l.a.createElement(d.a,{variant:"subtitle2",gutterBottom:!0},"Preferred Size: 460x652"),l.a.createElement(U.a,{dropzoneClass:n.dropzone,acceptedFiles:["image/*"],filesLimit:1,showAlerts:!0,onChange:function(e){0===e.length?t(Re({},a,{troopimage:null})):t(Re({},a,{troopimage:e[0]}))}})))))},Ie=Object(E.a)(function(e){return{cardBox:{padding:e.spacing(3)+"px 0"},card:{width:"100%",margin:"0px auto",display:"table"}}}),Ne=["./assets/graphics/troopcard/top.png","./assets/graphics/troopcard/bottom.png","./assets/graphics/troopcard/attack.png","./assets/graphics/troopcard/armor.png","./assets/graphics/troopcard/life.png","./assets/graphics/troopcard/trait_flag.png","./assets/graphics/troopcard/ascension.png","./assets/graphics/troopcard/ascension_spike.png","./assets/graphics/troopcard/shading_horizontal.png","./assets/graphics/troopcard/shading_vertical.png"],Ce={Common:{color:"#FEFEFE",pips:1},Rare:{color:"#54A721",pips:2},"Ultra-Rare":{color:"#1D71FF",pips:3},Epic:{color:"#9635E7",pips:4},Legendary:{color:"#F3A120",pips:5},Mythic:{color:"#13E3F6",pips:6},Doomed:{color:"#B90000",pips:6}};function De(e,a,t,r,l,n){e.width=490,e.height=746;var o=e.getContext("2d");a.width=e.width,a.height=e.height;var i=a.getContext("2d"),c=Ce[t.troop.rarity].color,s=Ce[t.troop.rarity].pips;o.save(),o.rect(0,46,e.width,e.height),o.clip(),o.drawImage(r[10],30,37,460,652),o.restore(),o.save(),o.rect(0,46,e.width,e.height),o.clip(),o.globalAlpha=.8235,o.drawImage(r[9],30,37,460,107),o.restore(),o.save(),o.rect(0,46,e.width,e.height),o.clip(),o.globalAlpha=.7843,o.translate(460,0),o.scale(-1,1),o.drawImage(r[8],-30,45,195,107),o.restore(),i.save(),i.drawImage(r[0],0,0,460,16),i.drawImage(r[1],0,659,460,50),i.fillStyle=c,i.globalCompositeOperation="source-in",i.fillRect(0,0,a.width,a.height),o.drawImage(a,30,30,e.width,e.height),i.clearRect(0,0,a.width,a.height),i.restore(),o.font='500 40px "Raleway"',o.fillStyle="#FFF",o.textAlign="right",o.fillText("Level",e.width-8,86),o.font='600 50px "Open Sans"',o.fillText(t.troop.level,e.width-8,138),o.drawImage(r[15],0,0,100,100),o.save(),o.font='600 60px "Open Sans"',o.fillStyle="#FFF",o.textAlign="center",o.shadowOffsetX=2,o.shadowOffsetY=2,o.shadowColor="#000",o.fillText(t.troop.cost,50,70),o.restore(),i.save();var m=!0,p=!1,d=void 0;try{for(var u,g=Array(s).keys()[Symbol.iterator]();!(m=(u=g.next()).done);m=!0){var h=u.value;i.drawImage(r[7],105+30*h,60,30,30)}}catch(S){p=!0,d=S}finally{try{m||null==g.return||g.return()}finally{if(p)throw d}}i.fillStyle=c,i.globalCompositeOperation="source-in",i.fillRect(0,0,a.width,a.height),o.drawImage(a,0,0,e.width,e.height),i.clearRect(0,0,a.width,a.height),i.restore(),i.save();var f=!0,b=!1,w=void 0;try{for(var v,E=Array(6-s).keys()[Symbol.iterator]();!(f=(v=E.next()).done);f=!0){var y=v.value;i.drawImage(r[6],255-30*y,60,30,30)}}catch(S){b=!0,w=S}finally{try{f||null==E.return||E.return()}finally{if(b)throw w}}i.fillStyle="#AFAFAF",i.globalCompositeOperation="source-in",i.fillRect(0,0,a.width,a.height),o.drawImage(a,0,0,e.width,e.height),i.clearRect(0,0,a.width,a.height),i.restore(),o.fillStyle="#000000B2",o.fillRect(30,618,460,71),o.drawImage(r[2],49,630,50,50),o.drawImage(r[3],216,630,44,50),o.drawImage(r[4],368,630,50,50),o.font='600 40px "Open Sans"',o.fillStyle="#FFF",o.textAlign="left",o.fillText(t.troop.attack,104,667),o.fillText(t.troop.armor,268,667),o.fillText(t.troop.life,423,667),o.font='500 57px "Raleway"',o.fillStyle="#FFF",o.textAlign="left",function(e,a,t,r,l,n){for(var o=n.split(" "),i=[],c=o[0],s=1;s<o.length;s++){var m=o[s];e.measureText(c+" "+m).width<r?c+=" "+m:(i.push(c),c=m)}i.push(c);for(var p=t-i.length*l,d=0;d<i.length;d++)e.fillText(i[d],a,p+l*d)}(o,50,630,380,57,t.troop.name),o.font='600 30px "Open Sans"',o.fillStyle="#CCCCCCFF",o.fillText(t.troop.kingdom,50,608),o.fillStyle="#000",o.textAlign="center";var x=""!==t.troop.type2?"".concat(t.troop.type1," / ").concat(t.troop.type2):t.troop.type1,O=o.measureText(x).width;o.fillText(x,260,722),i.save(),i.clearRect(0,0,a.width,a.height);var j=210-O/2,R=266+O/2;i.drawImage(r[11],j,692,44,44),i.drawImage(r[11],R,692,44,44),i.globalCompositeOperation="source-in",i.fillStyle="#000000",i.fillRect(0,0,a.width,a.height),o.drawImage(a,0,0,a.width,a.height),i.clearRect(0,0,a.width,a.height),i.restore(),i.save(),i.drawImage(r[5],30,238,120,60),i.drawImage(r[5],30,303,120,60),i.drawImage(r[5],30,368,120,60),i.globalCompositeOperation="source-in",i.fillStyle="#000000",i.fillRect(0,0,a.width,a.height),o.globalAlpha=.706,o.drawImage(a,0,0,a.width,a.height),i.clearRect(0,0,a.width,a.height),i.restore(),i.save(),i.drawImage(r[12],45,243,50,50),i.globalCompositeOperation="source-in",i.fillStyle=Ce.Epic.color,i.fillRect(0,0,a.width,a.height),o.globalAlpha=1,o.drawImage(a,0,0,a.width,a.height),i.clearRect(0,0,a.width,a.height),i.restore(),i.save(),i.drawImage(r[13],45,313,50,50),i.globalCompositeOperation="source-in",i.fillStyle=Ce.Legendary.color,i.fillRect(0,0,a.width,a.height),o.drawImage(a,0,0,a.width,a.height),i.clearRect(0,0,a.width,a.height),i.restore(),i.save(),i.drawImage(r[14],45,373,50,50),i.globalCompositeOperation="source-in",i.fillStyle=Ce.Mythic.color,i.fillRect(0,0,a.width,a.height),o.drawImage(a,0,0,a.width,a.height),i.clearRect(0,0,a.width,a.height),i.restore();var k=n.getContext("2d");k.clearRect(475,0,e.width,e.height),k.drawImage(e,475,0,e.width,e.height),l(e.toDataURL("image/png"))}var Pe=function(e){e.width=490,e.height=746;var a=e.getContext("2d"),t=new Image;t.onload=function(){a.drawImage(t,180,308,100,100)},t.src="./assets/graphics/troopcard/loading.png"},Te=function(e){return null!==e.troop.troopimage?URL.createObjectURL(e.troop.troopimage):"./assets/graphics/troopcard/infernus.png"},Be=function(e){var a=e.troop,t=e.canvasResult,n=e.setDownloadUrl,o=Ie(),i=l.a.useRef(null),c=l.a.useRef(null),m=l.a.useState(!1),p=Object(s.a)(m,2),d=p[0],g=p[1];return Object(r.useEffect)(function(){K.a.load({google:{families:["Open Sans:400,600,700","Roboto","Raleway"]},fontactive:function(){g(!0)}}),Pe(i.current)},[]),Object(r.useEffect)(function(){d?function(e,a,t,r,l,n,o){var i={},c=0,s=Ne.length+r.length;for(var m in Ne)i[m]=new Image,i[m].onload=function(){++c>=s&&l(e,a,t,i,n,o)},i[m].src=Ne[m];for(m in r){var p=parseInt(m)+Ne.length;i[p]=new Image,i[p].onload=function(){++c>=s&&l(e,a,t,i,n,o)},i[p].src=r[m]}}(i.current,c.current,a,[Te(a),"./assets/graphics/troopcard/roles/".concat(a.troop.role,".png"),"./assets/graphics/troopcard/traits/".concat(a.trait.trait1code,".png"),"./assets/graphics/troopcard/traits/".concat(a.trait.trait2code,".png"),"./assets/graphics/troopcard/traits/".concat(a.trait.trait3code,".png"),"./assets/graphics/troopcard/colors/".concat(a.troop.colors,".png")],De,n,t.current):Pe(i.current)},[a,d]),l.a.createElement(u.a,{height:1,className:o.cardBox},l.a.createElement("canvas",{ref:i,className:o.card}),l.a.createElement("canvas",{ref:c,style:{display:"none"}}))},Fe=Object(E.a)(function(e){return{buttonGrid:{paddingTop:"6px"},buttonIcon:{fontSize:"2em"},card:{padding:e.spacing(3)}}}),Ge=function(e){var a=e.troop,t=e.canvasResult,r=Object(m.a)(e,["troop","canvasResult"]),n=Fe(),o=l.a.useState(""),i=Object(s.a)(o,2),c=i[0],p=i[1];return l.a.createElement(P.a,Object.assign({item:!0,xs:12,lg:4},r),l.a.createElement(C.a,{className:n.card},l.a.createElement(D.a,null,l.a.createElement(d.a,{align:"center",variant:"h2"},"Preview"),l.a.createElement(Be,{troop:a,canvasResult:t,setDownloadUrl:p}),l.a.createElement(P.a,{container:!0,justify:"center",className:n.buttonGrid,spacing:3},l.a.createElement(P.a,{item:!0},l.a.createElement(T.a,{title:"Download","aria-label":"download"},l.a.createElement(B.a,{variant:"outlined",size:"large",href:c,download:"".concat(a.troop.name,".png")},l.a.createElement(k,{className:n.buttonIcon,icon:"nf-mdi-download"}))))))))},Ae=Object(E.a)(function(e){var a,t;return{cardGridItem:(a={},Object(p.a)(a,e.breakpoints.up("xs"),{order:1}),Object(p.a)(a,e.breakpoints.up("lg"),{order:2}),Object(p.a)(a,"order",2),Object(p.a)(a,"width","calc(75vh)"),a),formGridItem:(t={},Object(p.a)(t,e.breakpoints.up("xs"),{order:2}),Object(p.a)(t,e.breakpoints.up("lg"),{order:1}),t)}}),Ye=function(e){var a=e.troopData,t=e.debouncedTroop,r=e.setTroopData,n=e.canvasResult,o=Object(m.a)(e,["troopData","debouncedTroop","setTroopData","canvasResult"]),i=Ae();return l.a.createElement(P.a,Object.assign({container:!0,direction:"row"},o),l.a.createElement(Se,{troopData:a,className:i.formGridItem,setTroopData:r}),l.a.createElement(Ge,{troop:t,canvasResult:n,className:i.cardGridItem}))};function Le(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,r)}return t}function ze(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Le(t,!0).forEach(function(a){Object(p.a)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Le(t).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}var Ue=Object(E.a)(function(e){var a;return{content:(a={flexGrow:1,maxHeight:"calc(100vh - 64px)"},Object(p.a)(a,e.breakpoints.up("xs"),{width:"100%"}),Object(p.a)(a,e.breakpoints.up("lg"),{width:"calc(100vw - 240px)"}),a),grid:{display:"flex"},tabView:{marginBottom:"22vh"}}}),Me=function(e){var a=e.children,t=e.value,r=e.index,n=Object(m.a)(e,["children","value","index"]);return l.a.createElement(d.a,Object.assign({component:"div",role:"tabpanel",hidden:t!==r,id:"full-width-tabpanel-".concat(r),"aria-labelledby":"full-width-tab-".concat(r)},n),l.a.createElement(u.a,{p:3},a))};function Ve(e){return{id:"tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var We=function(){var e=Ue(),a=Object(y.a)(),t=l.a.useState({troop:{name:"Infernus",kingdom:"Broken Spire",rarity:"Mythic",level:"20",role:"Mage",cost:"24",colors:"RedYellowPurple",type1:"Divine",type2:"Elemental",attack:"40",armor:"40",life:"40",troopimage:null},spell:{magic:"25",spellname:"Eruption",spelldesc:"Deal {magic} damage to 2 random enemies, and half of that damage to adjacent enemies. Explode 5 random Gems.",spellmult:"1",spellbase:"10",spellrange:!1,spellimage:null},trait:{trait1name:"Elemental Shield",trait1desc:"Allied Elementals gain 2 Armor.",trait1code:"elementalbond",trait2name:"Fiery Death",trait2desc:"Summon a Firestorm when an enemy dies.",trait2code:"firebrand",trait3name:"Conflagration",trait3desc:"Burn all enemies on 4 or 5 Gem matches.",trait3code:"molten"}}),n=Object(s.a)(t,2),o=n[0],i=n[1],c=l.a.useState(1),m=Object(s.a)(c,2),p=m[0],d=m[1],u=function(e,a){var t=Object(r.useState)(e),l=Object(s.a)(t,2),n=l[0],o=l[1];return Object(r.useEffect)(function(){var t=setTimeout(function(){o(e)},a);return function(){clearTimeout(t)}},[e]),n}(o,100),E=l.a.createRef();Object(g.a)(a.breakpoints.up("lg"));return l.a.createElement(h.a,null,l.a.createElement(N,null),l.a.createElement(f.a,null),l.a.createElement(b.a,{maxWidth:!1,className:e.content},l.a.createElement(w.a,{value:p,onChange:function(e,a){d(a)},indicatorColor:"primary",textColor:"primary",centered:!0},l.a.createElement(v.a,Object.assign({label:"Spell"},Ve(0))),l.a.createElement(v.a,Object.assign({label:"Troop"},Ve(1))),l.a.createElement(v.a,Object.assign({label:"Traits"},Ve(2))),l.a.createElement(v.a,Object.assign({label:"Result"},Ve(3)))),l.a.createElement(O.a,{axis:"rtl"===a.direction?"x-reverse":"x",index:p,onChangeIndex:d},l.a.createElement(Me,{value:p,index:0,dir:a.direction},l.a.createElement(ne,{className:e.tabView,canvasResult:E,spellData:o.spell,setSpellData:function(e){i(ze({},o,{spell:e}))},debouncedTroop:u})),l.a.createElement(Me,{value:p,index:1,dir:a.direction},l.a.createElement(Ye,{className:e.tabView,canvasResult:E,troopData:o.troop,setTroopData:function(e){i(ze({},o,{troop:e}))},debouncedTroop:u})),l.a.createElement(Me,{value:p,index:2,dir:a.direction},l.a.createElement(Oe,{className:e.tabView,canvasResult:E,traitData:o.trait,setTraitData:function(e){i(ze({},o,{trait:e}))},debouncedTroop:u})),l.a.createElement(Me,{value:p,index:3,dir:a.direction},l.a.createElement(G,{className:e.tabView,canvasResult:E,troop:o})))))},_e=t(170),Je=t(171),Ke=(t(114),t(115),t(116),Object(i.a)({palette:{type:"dark",primary:_e.a,secondary:Je.a},zIndex:{appBar:1}}));o.a.render(l.a.createElement(function(){return l.a.createElement(c.a,{theme:Ke},l.a.createElement(We,null))},null),document.getElementById("root"))},84:function(e,a,t){e.exports=t(117)}},[[84,1,2]]]);
//# sourceMappingURL=main.8217f5a0.chunk.js.map